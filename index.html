<!-- <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>واجهة تواصل مع FastAPI – id & name</title>
  <style>
    :root{
      --bg:#0f172a;        /* slate-900 */
      --panel:#111827;     /* gray-900 */
      --panel-2:#1f2937;   /* gray-800 */
      --text:#e5e7eb;      /* gray-200 */
      --muted:#9ca3af;     /* gray-400 */
      --accent:#22d3ee;    /* cyan-400 */
      --accent-2:#06b6d4;  /* cyan-500 */
      --good:#10b981;      /* emerald-500 */
      --bad:#ef4444;       /* red-500 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Naskh Arabic", Tahoma, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 80% -10%, #164e63 0%, transparent 60%), var(--bg);
      color:var(--text);
    }
    .container{max-width:900px;margin:40px auto;padding:24px}
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:20px; padding:24px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(6px);
    }
    h1{margin:0 0 8px;font-size:clamp(22px,3vw,30px)}
    p.lead{margin:0 0 18px;color:var(--muted)}
    form{display:grid; gap:14px; grid-template-columns: 1fr 1fr; align-items:end}
    label{font-size:14px;color:var(--muted)}
    input,button,select{
      height:44px; width:100%; border-radius:12px; border:1px solid rgba(255,255,255,.12);
      background:var(--panel-2); color:var(--text); padding:0 14px; outline:none;
    }
    input:focus{border-color:var(--accent)}
    .row-span-2{grid-column: span 2}
    .actions{display:flex; gap:10px}
    button{
      cursor:pointer; border:none; font-weight:600; transition: transform .06s ease, background .2s ease;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      box-shadow:0 6px 20px rgba(34,211,238,.35);
    }
    button:hover{transform:translateY(-1px)}
    button.secondary{background:var(--panel); box-shadow:none; border:1px solid rgba(255,255,255,.08)}

    .result{
      margin-top:18px; padding:16px; background:var(--panel); border:1px solid rgba(255,255,255,.08);
      border-radius:16px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      white-space: pre-wrap; overflow:auto; max-height: 320px;
    }
    .meta{display:flex; gap:14px; flex-wrap:wrap; align-items:center; color:var(--muted); font-size: 13px}
    .pill{background: var(--panel-2); border:1px solid rgba(255,255,255,.08); border-radius: 999px; padding:6px 10px}
    .ok{color:var(--good)}
    .err{color:var(--bad)}
    .footer{margin-top:18px; color:var(--muted); font-size: 13px}

    @media (max-width:720px){
      form{grid-template-columns: 1fr}
      .row-span-2{grid-column: auto}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>واجهة بسيطة للتواصل مع FastAPI</h1>
      <p class="lead">ترسل قيم <strong>id</strong> و<strong>name</strong> إلى المسار <code>/</code> (طريقة GET) وتعرض لك النتيجة JSON.</p>

      <form id="api-form">
        <div>
          <label for="baseUrl">عنوان الخادم (Base URL)</label>
          <input id="baseUrl" name="baseUrl" type="text" value="http://127.0.0.1:8000" placeholder="مثال: http://127.0.0.1:8000" required />
        </div>
        <div>
          <label for="id">المعرف (id)</label>
          <input id="id" name="id" type="number" min="0" step="1" placeholder="مثال: 1" required />
        </div>
        <div>
          <label for="name">الاسم (name)</label>
          <input id="name" name="name" type="text" placeholder="مثال: Akram" required />
        </div>
        <div class="actions row-span-2">
          <button type="submit">إرسال الطلب</button>
          <button type="button" class="secondary" id="resetBtn">إعادة تعيين</button>
        </div>
      </form>

      <div class="meta" style="margin-top:12px">
        <div class="pill">الطريقة: <strong>GET</strong></div>
        <div class="pill">المسار: <code>/</code></div>
        <div class="pill" id="statusPill">الحالة: <span>—</span></div>
        <div class="pill" id="urlPill" title="الرابط الذي تم طلبه">الرابط: —</div>
      </div>

      <div class="result" id="result">في انتظار الإرسال…</div>

      <div class="footer">
        ملاحظة: إذا شغّلت الخادم على منفذ مختلف، حدّث خانة <em>Base URL</em>، مثلًا <code>http://127.0.0.1:8001</code>.
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('api-form');
    const resultEl = document.getElementById('result');
    const statusPill = document.getElementById('statusPill').querySelector('span') || document.getElementById('statusPill');
    const urlPill = document.getElementById('urlPill');
    const resetBtn = document.getElementById('resetBtn');

    // إذا فتح المستخدم الصفحة مع باراميترات ?id=..&name=..، عبّئ الحقول تلقائيًا
    const params = new URLSearchParams(location.search);
    if (params.has('id')) document.getElementById('id').value = params.get('id');
    if (params.has('name')) document.getElementById('name').value = params.get('name');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultEl.textContent = 'جارٍ الإرسال…';
      statusPill.textContent = 'جارٍ…';
      statusPill.className = '';

      // قراءة القيم
      const baseUrl = document.getElementById('baseUrl').value.replace(/\/$/, ''); // إزالة الشرطة المائلة الأخيرة إن وُجدت
      const id = document.getElementById('id').value.trim();
      const name = document.getElementById('name').value.trim();

      if (!baseUrl) return alert('الرجاء إدخال Base URL صحيح');
      if (!id || !name) return alert('الرجاء إدخال id و name');

      // تكوين الرابط
      const url = `${baseUrl}/?` + new URLSearchParams({ id, name }).toString();
      urlPill.textContent = `الرابط: ${url}`;

      try {
        const res = await fetch(url, { method: 'GET' });
        const text = await res.text();
        let data;
        try { data = JSON.parse(text); } catch { data = text; }

        statusPill.textContent = `${res.status} ${res.ok ? '(OK)' : ''}`;
        statusPill.className = res.ok ? 'ok' : 'err';

        resultEl.textContent = typeof data === 'string' ? data : JSON.stringify(data, null, 2);
      } catch (err) {
        statusPill.textContent = 'خطأ في الاتصال';
        statusPill.className = 'err';
        resultEl.textContent = 'تعذّر الاتصال بالخادم. تأكد أن الخادم يعمل وأن العنوان صحيح.\n' + (err?.message || err);
      }
    });

    resetBtn.addEventListener('click', () => {
      document.getElementById('id').value = '';
      document.getElementById('name').value = '';
      resultEl.textContent = 'في انتظار الإرسال…';
      statusPill.textContent = '—';
      statusPill.className = '';
      urlPill.textContent = 'الرابط: —';
    });
  </script> -->
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>واجهة تواصل مع FastAPI – BMI</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --panel-2:#1f2937;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --accent:#22d3ee;
      --accent-2:#06b6d4;
      --good:#10b981;
      --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font-family:'Cairo', sans-serif; background:linear-gradient(135deg,#0f172a,#164e63); color:var(--text)}
    .container{max-width:900px;margin:50px auto;padding:24px}
    .card{background:rgba(17,24,39,0.85); border-radius:20px; padding:32px; box-shadow:0 20px 40px rgba(0,0,0,0.4); backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,0.1);}
    h1{margin:0 0 12px;font-size:clamp(24px,4vw,32px); text-align:center; color:var(--accent-2);}
    p.lead{margin:0 0 24px;color:var(--muted); text-align:center; font-size:16px}
    form{display:grid; gap:16px; grid-template-columns: 1fr 1fr; align-items:end}
    label{font-size:14px;color:var(--muted)}
    input,button{height:50px; width:100%; border-radius:14px; border:none; background:var(--panel-2); color:var(--text); padding:0 16px; font-size:16px; outline:none}
    input:focus{border:2px solid var(--accent);}
    .row-span-2{grid-column: span 2}
    .actions{display:flex; gap:14px}
    button{cursor:pointer; font-weight:600; transition: transform .1s ease, background .3s ease; background:linear-gradient(90deg,var(--accent),var(--accent-2)); box-shadow:0 8px 25px rgba(34,211,238,0.35);}
    button:hover{transform:translateY(-2px); box-shadow:0 12px 30px rgba(34,211,238,0.5);}
    button.secondary{background:var(--panel); box-shadow:none; border:1px solid rgba(255,255,255,0.1)}
    .result{margin-top:24px; padding:20px; background:rgba(31,41,55,0.85); border-radius:18px; font-family: ui-monospace, monospace; white-space: pre-wrap; overflow:auto; max-height: 360px; box-shadow:0 4px 15px rgba(0,0,0,0.25)}
    .meta{display:flex; gap:14px; flex-wrap:wrap; align-items:center; color:var(--muted); font-size:14px; margin-top:16px}
    .pill{background: var(--panel-2); border-radius: 999px; padding:8px 12px; font-weight:600;}
    .ok{color:var(--good)}
    .err{color:var(--bad)}
    .footer{margin-top:24px; color:var(--muted); font-size:14px; text-align:center;}
    @media (max-width:720px){form{grid-template-columns: 1fr} .row-span-2{grid-column: auto}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>واجهة BMI API</h1>
      <p class="lead">أدخل <strong>weight</strong> و <strong>height</strong> لإرسال طلب GET وعرض النتيجة JSON.</p>
      <form id="api-form">
        <div>
          <label for="baseUrl">Base URL</label>
          <input id="baseUrl" name="baseUrl" type="text" value="http://127.0.0.1:8000" required />
        </div>
        <div>
          <label for="weight">الوزن (weight)</label>
          <input id="weight" name="weight" type="number" min="0" step="any" placeholder="مثال: 10" required />
        </div>
        <div>
          <label for="height">الطول (height)</label>
          <input id="height" name="height" type="number" min="0" step="any" placeholder="مثال: 100" required />
        </div>
        <div class="actions row-span-2">
          <button type="submit">إرسال</button>
          <button type="button" class="secondary" id="resetBtn">إعادة تعيين</button>
        </div>
      </form>
      <div class="meta">
        <div class="pill">طريقة: <strong>GET</strong></div>
        <div class="pill">المسار: <code>/</code></div>
        <div class="pill" id="statusPill">الحالة: <span>—</span></div>
        <div class="pill" id="urlPill" title="الرابط المطلوب">الرابط: —</div>
      </div>
      <div class="result" id="result">في انتظار الإرسال…</div>
      <div class="footer">تأكد من تشغيل الخادم وتحديث Base URL إذا استخدمت منفذ مختلف.</div>
    </div>
  </div>

  <script>
    const form = document.getElementById('api-form');
    const resultEl = document.getElementById('result');
    const statusPill = document.getElementById('statusPill').querySelector('span') || document.getElementById('statusPill');
    const urlPill = document.getElementById('urlPill');
    const resetBtn = document.getElementById('resetBtn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultEl.textContent = 'جارٍ الإرسال…';
      statusPill.textContent = 'جارٍ…';
      statusPill.className = '';

      const baseUrl = document.getElementById('baseUrl').value.replace(/\/$/,'');
      const weight = document.getElementById('weight').value.trim();
      const height = document.getElementById('height').value.trim();

      if(!baseUrl || !weight || !height) return alert('الرجاء إدخال جميع القيم');

      const url = `${baseUrl}/?` + new URLSearchParams({ weight, height }).toString();
      urlPill.textContent = `الرابط: ${url}`;

      try {
        const res = await fetch(url, { method: 'GET' });
        const text = await res.text();
        let data;
        try { data = JSON.parse(text); } catch { data = text; }

        statusPill.textContent = `${res.status} ${res.ok ? '(OK)' : ''}`;
        statusPill.className = res.ok ? 'ok' : 'err';
        resultEl.textContent = typeof data === 'string' ? data : JSON.stringify(data,null,2);
      } catch(err) {
        statusPill.textContent = 'خطأ في الاتصال';
        statusPill.className = 'err';
        resultEl.textContent = 'تعذّر الاتصال بالخادم.\\n' + (err?.message || err);
      }
    });

    resetBtn.addEventListener('click', () => {
      document.getElementById('weight').value = '';
      document.getElementById('height').value = '';
      resultEl.textContent = 'في انتظار الإرسال…';
      statusPill.textContent = '—';
      statusPill.className = '';
      urlPill.textContent = 'الرابط: —';
    });
  </script>
</body>
</html>
